<div class="box">
  <div class="top-fixed">
    <div class="word">{{Word}}</div>
    <div class="phonetic transparent">{{IPA}}</div>
    <hr class="divider">
  </div>
</div>

<script>
// PC端自动检测深色主题并加data-anki-theme="dark"
if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
  document.documentElement.setAttribute('data-anki-theme', 'dark');
} else {
  document.documentElement.removeAttribute('data-anki-theme');
}

// 检测Anki主题状态并同步到我们的主题
function syncAnkiTheme() {
    // 获取Anki的主题状态
    const isDarkMode = document.body.classList.contains('nightMode');
    
    // 设置我们的主题
    if (isDarkMode) {
        document.documentElement.setAttribute('data-anki-theme', 'dark');
    } else {
        document.documentElement.removeAttribute('data-anki-theme');
    }
}

// 监听Anki主题变化
const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
        if (mutation.attributeName === 'class') {
            syncAnkiTheme();
        }
    });
});

// 开始观察body的class变化
observer.observe(document.body, {
    attributes: true,
    attributeFilter: ['class']
});

// 初始化主题
syncAnkiTheme();
</script>